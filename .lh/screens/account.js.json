{
    "sourceFile": "screens/account.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 29,
            "patches": [
                {
                    "date": 1639062252106,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1639062414175,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,12 +6,29 @@\n import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar } from '@ui-kitten/components';\n \n const Account = ({navigation}) =>{\n   \n-  const [account, setaccount] = useState()\n   const [tab, settab] = useState(0)\n   const [date, setdate] = useState(new Date())\n   const [selected, setselected] = useState([])\n+  const [user, setUser] = useState()\n+  const [error, seterror] = useState()\n+  const [loading, setloading] = useState(false)\n+  const [imgloading, setimgloading] = useState(false)\n+  const [response, setresponse] = useState({\n+    error: false,\n+    message: null\n+  })\n+  const [account, setaccount] = useState({\n+    firstname: '', \n+    lastname: '', \n+    age: '', \n+    email: '', \n+    avatar: '', \n+    address: '', \n+    gender: '',\n+    phoneNumber: ''\n+  })\n \n   const logout = async ()=>{\n     await AsyncStorage.removeItem('_email')\n     await AsyncStorage.removeItem('_accesstoken')\n@@ -19,11 +36,21 @@\n     navigation.replace('Login')\n   }\n \n   useEffect(() => {\n-    (()=>{\n-      // loadNotifications()\n+    (async()=>{\n+      let account = await AsyncStorage.getItem('user')\n+      console.log(account)\n+      // setUser(JSON.parse(account))\n+      // setaccount({\n+      //   ...JSON.parse(account),\n+      //   ...{\n+      //     gender: JSON.parse(account).sex,\n+      //     phoneNumber: JSON.parse(account).phone\n+      //   }\n+      // })\n     })()\n+\n   }, [])\n \n   return(\n     <Layout style={{ flex: 1 }}>\n"
                },
                {
                    "date": 1639062692282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n \n   useEffect(() => {\n     (async()=>{\n       let account = await AsyncStorage.getItem('user')\n-      console.log(account)\n+      console.log(await AsyncStorage.getAllKeys())\n       // setUser(JSON.parse(account))\n       // setaccount({\n       //   ...JSON.parse(account),\n       //   ...{\n"
                },
                {
                    "date": 1639067217180,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n \n   useEffect(() => {\n     (async()=>{\n       let account = await AsyncStorage.getItem('user')\n-      console.log(await AsyncStorage.getAllKeys())\n+      console.log(account)\n       // setUser(JSON.parse(account))\n       // setaccount({\n       //   ...JSON.parse(account),\n       //   ...{\n"
                },
                {
                    "date": 1639067387139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,17 +38,17 @@\n \n   useEffect(() => {\n     (async()=>{\n       let account = await AsyncStorage.getItem('user')\n-      console.log(account)\n-      // setUser(JSON.parse(account))\n-      // setaccount({\n-      //   ...JSON.parse(account),\n-      //   ...{\n-      //     gender: JSON.parse(account).sex,\n-      //     phoneNumber: JSON.parse(account).phone\n-      //   }\n-      // })\n+      // console.log(account)\n+      setUser(JSON.parse(account))\n+      setaccount({\n+        ...JSON.parse(account),\n+        ...{\n+          gender: JSON.parse(account).sex,\n+          phoneNumber: JSON.parse(account).phone\n+        }\n+      })\n     })()\n \n   }, [])\n \n"
                },
                {
                    "date": 1639067727589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,10 +68,25 @@\n \n           { tab == 0 ?\n           <ScrollView showsVerticalScrollIndicator={false}>\n             <Avatar source={{uri: ''}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n-            <Input placeholder={'First Name'} label={'First Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n-            <Input placeholder={'Last Name'} label={'Last Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n+\n+            <Input value={account.firstname} onChangeText={txt=>{\n+                      setaccount({\n+                        ... account,\n+                        ... {\n+                          firstname: txt\n+                        }\n+                      })\n+                    }} placeholder={'First Name'} label={'First Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n+            <Input value={account.lastname} onChangeText={txt=>{\n+                      setaccount({\n+                        ... account,\n+                        ... {\n+                          lastname: txt\n+                        }\n+                      })\n+                    }} placeholder={'Last Name'} label={'Last Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Phone Number'} label={'Phone Number'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Speciality'} label={'Speciality'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n"
                },
                {
                    "date": 1639067840518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,9 +85,16 @@\n                           lastname: txt\n                         }\n                       })\n                     }} placeholder={'Last Name'} label={'Last Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n-            <Input placeholder={'Phone Number'} label={'Phone Number'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n+            <Input value={account.phone} onChangeText={txt=>{\n+                      setaccount({\n+                        ... account,\n+                        ... {\n+                          phone: txt\n+                        }\n+                      })\n+                    }} placeholder={'Phone Number'} label={'Phone Number'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Speciality'} label={'Speciality'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Button style={{margin: 15}}>Save Changes</Button>\n"
                },
                {
                    "date": 1639067922694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,9 +93,16 @@\n                           phone: txt\n                         }\n                       })\n                     }} placeholder={'Phone Number'} label={'Phone Number'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n-            <Input placeholder={'Speciality'} label={'Speciality'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n+            <Input value={account.department} onChangeText={txt=>{\n+                      setaccount({\n+                        ... account,\n+                        ... {\n+                          department: txt\n+                        }\n+                      })\n+                    }} placeholder={'Speciality'} label={'Speciality'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Button style={{margin: 15}}>Save Changes</Button>\n           </ScrollView>\n"
                },
                {
                    "date": 1639067941659,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,16 @@\n                           department: txt\n                         }\n                       })\n                     }} placeholder={'Speciality'} label={'Speciality'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n-            <Input placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n+            <Input value={account.seniority} onChangeText={txt=>{\n+                      setaccount({\n+                        ... account,\n+                        ... {\n+                          seniority: txt\n+                        }\n+                      })\n+                    }} placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Input placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Button style={{margin: 15}}>Save Changes</Button>\n           </ScrollView>\n           :\n"
                },
                {
                    "date": 1639067959426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,16 @@\n                           seniority: txt\n                         }\n                       })\n                     }} placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n-            <Input placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n+            <Input value={account.bio} onChangeText={txt=>{\n+                      setaccount({\n+                        ... account,\n+                        ... {\n+                          bio: txt\n+                        }\n+                      })\n+                    }} placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n             <Button style={{margin: 15}}>Save Changes</Button>\n           </ScrollView>\n           :\n           <ScrollView showsVerticalScrollIndicator={false}>\n"
                },
                {
                    "date": 1639068029956,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,9 @@\n           </TabBar>\n \n           { tab == 0 ?\n           <ScrollView showsVerticalScrollIndicator={false}>\n-            <Avatar source={{uri: ''}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n+            <Avatar source={{uri: account.avatar}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n \n             <Input value={account.firstname} onChangeText={txt=>{\n                       setaccount({\n                         ... account,\n"
                },
                {
                    "date": 1639068723073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,14 +51,76 @@\n     })()\n \n   }, [])\n \n+  const saveAccount = async()=> {\n+    setloading(true)\n+\n+    if(account.firstname.trim().length == 0){\n+      return seterror('name')\n+    }\n+\n+    if(account.lastname.trim().length == 0){\n+      return seterror('lastname')\n+    }\n+\n+    if(account.email.trim().length == 0){\n+      return seterror('email')\n+    }\n+\n+    if(user.firstname != account.firstname ||\n+      user.lastname != account.lastname ||\n+      true){\n+        try{\n+          setloading(true)\n+          let data = await update(account)\n+\n+          setloading(false)\n+\n+          if(data.success){\n+            await AsyncStorage.setItem('user', JSON.stringify({...account, ...{ phone: account.phone, avatar: account.avatar }}))\n+            setresponse({\n+              error: false,\n+              message: 'Your profile was successfully updated! image would be reflect on app restart'\n+            })\n+          }else{\n+            setresponse({\n+              error: true,\n+              message: data.message\n+            })\n+          }\n+\n+        }catch(e){\n+          console.log(e)\n+          setloading(false)\n+          setresponse({\n+            error: true,\n+            message: e.response.data.message\n+          })\n+        }\n+      }\n+\n+    setloading(false)\n+  }\n+\n   return(\n     <Layout style={{ flex: 1 }}>\n       <SafeAreaView style={{flex: 1}}>\n         <Layout style={{ flex: 1 }}>\n           <Reuse.header nav={navigation} logout={logout} title={'My Account'}/>\n \n+          <Modal\n+            visible={response.message}\n+            backdropStyle={{\n+              backgroundColor: 'rgba(0, 0, 0, 0.3)'\n+            }}>\n+            <Card disabled status={response.error ? 'danger' : 'primary'} style={{width: Dimensions.get('screen').width-60}}>\n+              <Text category=\"h6\" style={{textAlign: 'center', margin: 15}} status={response.error ? 'danger' : 'primary'}>{response.error ? 'Error!' : 'Saved!'}</Text>\n+              <Text style={{textAlign: 'center'}}>{response.message}</Text>\n+              <Button onPress={()=>{setresponse({error: false, message: null})}} appearance={'outline'}  status={response.error ? 'basic' : 'primary'} style={{marginTop: 15}}>{response.error ? 'Try Again' : 'Alright'}</Button>\n+            </Card>\n+          </Modal>\n+\n           <TabBar\n             style={{minHeight: 50}}\n             selectedIndex={tab}\n             onSelect={settab}>\n@@ -117,9 +179,10 @@\n                           bio: txt\n                         }\n                       })\n                     }} placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n-            <Button style={{margin: 15}}>Save Changes</Button>\n+            <Button disabled={loading}\n+                    onPress={saveAccount} style={{margin: 15}}>Save Changes</Button>\n           </ScrollView>\n           :\n           <ScrollView showsVerticalScrollIndicator={false}>\n             <Calendar\n"
                },
                {
                    "date": 1639068738874,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n-import { View, SafeAreaView, ScrollView } from 'react-native';\n+import { View, SafeAreaView, ScrollView, Modal } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar } from '@ui-kitten/components';\n"
                },
                {
                    "date": 1639068813396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,10 @@\n import React, { useEffect, useState } from 'react';\n-import { View, SafeAreaView, ScrollView, Modal } from 'react-native';\n+import { View, SafeAreaView, ScrollView } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n-import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar } from '@ui-kitten/components';\n+import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card } from '@ui-kitten/components';\n \n const Account = ({navigation}) =>{\n   \n   const [tab, settab] = useState(0)\n"
                },
                {
                    "date": 1639068839829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { View, SafeAreaView, ScrollView } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n-import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card } from '@ui-kitten/components';\n+import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n \n const Account = ({navigation}) =>{\n   \n   const [tab, settab] = useState(0)\n"
                },
                {
                    "date": 1639068855517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n-import { View, SafeAreaView, ScrollView } from 'react-native';\n+import { View, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n"
                },
                {
                    "date": 1639068895179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n-import { View, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n+import { View, Text, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n"
                },
                {
                    "date": 1639068916088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,10 @@\n import React, { useEffect, useState } from 'react';\n-import { View, Text, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n+import { View, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n-import { Avatar, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n+import { Avatar, Text, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n \n const Account = ({navigation}) =>{\n   \n   const [tab, settab] = useState(0)\n"
                },
                {
                    "date": 1639069059006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,9 +71,9 @@\n       user.lastname != account.lastname ||\n       true){\n         try{\n           setloading(true)\n-          let data = await update(account)\n+          let data = await API.update_physician(account)\n \n           setloading(false)\n \n           if(data.success){\n"
                },
                {
                    "date": 1639069100033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,10 +73,8 @@\n         try{\n           setloading(true)\n           let data = await API.update_physician(account)\n \n-          setloading(false)\n-\n           if(data.success){\n             await AsyncStorage.setItem('user', JSON.stringify({...account, ...{ phone: account.phone, avatar: account.avatar }}))\n             setresponse({\n               error: false,\n"
                },
                {
                    "date": 1639069370713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,8 +73,10 @@\n         try{\n           setloading(true)\n           let data = await API.update_physician(account)\n \n+          console.log(data)\n+          \n           if(data.success){\n             await AsyncStorage.setItem('user', JSON.stringify({...account, ...{ phone: account.phone, avatar: account.avatar }}))\n             setresponse({\n               error: false,\n"
                },
                {
                    "date": 1639069482019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { View, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n+import DocumentPicker from 'react-native-document-picker'\n import { Avatar, Text, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n \n const Account = ({navigation}) =>{\n   \n@@ -74,9 +75,9 @@\n           setloading(true)\n           let data = await API.update_physician(account)\n \n           console.log(data)\n-          \n+\n           if(data.success){\n             await AsyncStorage.setItem('user', JSON.stringify({...account, ...{ phone: account.phone, avatar: account.avatar }}))\n             setresponse({\n               error: false,\n"
                },
                {
                    "date": 1639069687219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n-import { View, SafeAreaView, ScrollView, Dimensions, Platform } from 'react-native';\n+import { View, SafeAreaView, ScrollView, Dimensions, Platform, TouchableOpacity } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n import DocumentPicker from 'react-native-document-picker'\n@@ -130,9 +130,12 @@\n           </TabBar>\n \n           { tab == 0 ?\n           <ScrollView showsVerticalScrollIndicator={false}>\n-            <Avatar source={{uri: account.avatar}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n+            <TouchableOpacity>\n+              <Avatar source={{uri: account.avatar}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n+            </TouchableOpacity>\n+            \n \n             <Input value={account.firstname} onChangeText={txt=>{\n                       setaccount({\n                         ... account,\n"
                },
                {
                    "date": 1639069774371,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n-import { View, SafeAreaView, ScrollView, Dimensions, Platform, TouchableOpacity } from 'react-native';\n+import { View, SafeAreaView, ScrollView, Dimensions, Platform, TouchableOpacity, ActivityIndicator } from 'react-native';\n import * as Reuse from '../components/reusables'\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n import DocumentPicker from 'react-native-document-picker'\n@@ -130,10 +130,15 @@\n           </TabBar>\n \n           { tab == 0 ?\n           <ScrollView showsVerticalScrollIndicator={false}>\n-            <TouchableOpacity>\n-              <Avatar source={{uri: account.avatar}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n+            <TouchableOpacity onPress={()=>pickImage()}>\n+              {\n+                imgloading ? \n+                <ActivityIndicator color=\"green\"/>:\n+                <Avatar source={{uri: account.avatar}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n+              }\n+              \n             </TouchableOpacity>\n             \n \n             <Input value={account.firstname} onChangeText={txt=>{\n"
                },
                {
                    "date": 1639069795703,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,8 +52,12 @@\n     })()\n \n   }, [])\n \n+  const pickImage = async()=>{\n+    \n+  }\n+\n   const saveAccount = async()=> {\n     setloading(true)\n \n     if(account.firstname.trim().length == 0){\n"
                },
                {
                    "date": 1639069870340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,38 @@\n \n   }, [])\n \n   const pickImage = async()=>{\n+    // let result = await ImagePicker.launchImageLibraryAsync({\n+      setimgloading(true)\n     \n+    try{\n+      let result = await DocumentPicker.pick({\n+        type: [DocumentPicker.types.images],\n+        allowMultiSelection: false,\n+    })\n+\n+      if (!result.cancelled) {\n+        result = (result[0]);\n+        var path = getPlatformPath(result).value;\n+        var name = getFileName(result.name, path);\n+        var blob = await uriToBlob(result.uri);\n+        let type = result.type;\n+        let attached = await firebase.storage().ref(`new-photo/${name}`).put(blob, {contentType: type})\n+        let url = await firebase.storage().ref(`new-photo`).child(name).getDownloadURL()\n+        // console.log(url);\n+        // setimgloading(false)\n+        // return ;\n+        setaccount({\n+          ...account,\n+          ...{\n+            avatar: url\n+          }\n+        });\n+      }\n+    }catch(e){}\n+\n+    setimgloading(false)\n   }\n \n   const saveAccount = async()=> {\n     setloading(true)\n"
                },
                {
                    "date": 1639069928309,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import AsyncStorage from '@react-native-async-storage/async-storage';\n import * as API from '../api';\n import DocumentPicker from 'react-native-document-picker'\n import { Avatar, Text, Layout, Input, Button, TabBar, Tab, Calendar,Modal, Card, Icon } from '@ui-kitten/components';\n+import firebase from 'firebase';\n \n const Account = ({navigation}) =>{\n   \n   const [tab, settab] = useState(0)\n"
                },
                {
                    "date": 1639069964134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,11 @@\n             avatar: url\n           }\n         });\n       }\n-    }catch(e){}\n+    }catch(e){\n+      console.log(e)\n+    }\n \n     setimgloading(false)\n   }\n \n"
                },
                {
                    "date": 1639070014032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,8 +53,56 @@\n     })()\n \n   }, [])\n \n+  // added methods\n+  const getFileName = (name, path)=> {\n+    if (name != null) { return name; }\n+\n+    if (Platform.OS === \"ios\") {\n+        path = \"~\" + path.substring(path.indexOf(\"/Documents\"));\n+    }\n+    return path.split(\"/\").pop();\n+}\n+\n+const getPlatformPath = ({ path, uri }) => {\n+    return Platform.select({\n+        android: { \"value\": uri },\n+        ios: { \"value\": uri }\n+    })\n+}\n+\n+const getPlatformURI = (imagePath) => {\n+    let imgSource = imagePath;\n+    if (isNaN(imagePath)) {\n+        imgSource = { uri: this.state.imagePath };\n+        if (Platform.OS == 'android') {\n+            imgSource.uri = \"file:///\" + imgSource.uri;\n+        }\n+    }\n+    return imgSource\n+}\n+\n+const uriToBlob = (uri) => {\n+    return new Promise((resolve, reject) => {\n+      const xhr = new XMLHttpRequest();\n+      xhr.onload = function() {\n+        // return the blob\n+        resolve(xhr.response);\n+      };\n+      \n+      xhr.onerror = function() {\n+        // something went wrong\n+        reject(new Error('uriToBlob failed'));\n+      };\n+      // this helps us get a blob\n+      xhr.responseType = 'blob';\n+      xhr.open('GET', uri, true);\n+      \n+      xhr.send();\n+    });\n+  }\n+\n   const pickImage = async()=>{\n     // let result = await ImagePicker.launchImageLibraryAsync({\n       setimgloading(true)\n     \n"
                },
                {
                    "date": 1639264148496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,8 +113,13 @@\n     })\n \n       if (!result.cancelled) {\n         result = (result[0]);\n+        if(result.size/1024 > 500){\n+            seterror(`${attached.name} cannot be attached. Exceed the maximum upload size (500KB).`)\n+            return false\n+        }\n+\n         var path = getPlatformPath(result).value;\n         var name = getFileName(result.name, path);\n         var blob = await uriToBlob(result.uri);\n         let type = result.type;\n"
                }
            ],
            "date": 1639062252106,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from 'react';\nimport { View, SafeAreaView, ScrollView } from 'react-native';\nimport * as Reuse from '../components/reusables'\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as API from '../api';\nimport { Avatar, Layout, Input, Button, TabBar, Tab, Calendar } from '@ui-kitten/components';\n\nconst Account = ({navigation}) =>{\n  \n  const [account, setaccount] = useState()\n  const [tab, settab] = useState(0)\n  const [date, setdate] = useState(new Date())\n  const [selected, setselected] = useState([])\n\n  const logout = async ()=>{\n    await AsyncStorage.removeItem('_email')\n    await AsyncStorage.removeItem('_accesstoken')\n    navigation.goBack()\n    navigation.replace('Login')\n  }\n\n  useEffect(() => {\n    (()=>{\n      // loadNotifications()\n    })()\n  }, [])\n\n  return(\n    <Layout style={{ flex: 1 }}>\n      <SafeAreaView style={{flex: 1}}>\n        <Layout style={{ flex: 1 }}>\n          <Reuse.header nav={navigation} logout={logout} title={'My Account'}/>\n\n          <TabBar\n            style={{minHeight: 50}}\n            selectedIndex={tab}\n            onSelect={settab}>\n            <Tab title='Account Details'/>\n            <Tab title='My Availability'/>\n          </TabBar>\n\n          { tab == 0 ?\n          <ScrollView showsVerticalScrollIndicator={false}>\n            <Avatar source={{uri: ''}} size={'giant'} shape={'round'} style={{alignSelf: 'center', margin: 15, backgroundColor: '#141414'}}/>\n            <Input placeholder={'First Name'} label={'First Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n            <Input placeholder={'Last Name'} label={'Last Name'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n            <Input placeholder={'Phone Number'} label={'Phone Number'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n            <Input placeholder={'Speciality'} label={'Speciality'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n            <Input placeholder={'Seniority'} label={'Seniority'} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n            <Input placeholder={'Write something about yourself'} label={'Biography'} multiline numberOfLines={5} size={'medium'} style={{marginHorizontal: 15, marginVertical: 5}}/>\n            <Button style={{margin: 15}}>Save Changes</Button>\n          </ScrollView>\n          :\n          <ScrollView showsVerticalScrollIndicator={false}>\n            <Calendar\n              date={date}\n              onSelect={setdate}\n              min={new Date()}\n              style={{margin: 15, alignSelf: 'center'}}/>\n\n            <View style={{flexDirection: 'row', marginHorizontal: 15}}>\n              <Button style={{flex: 1}} size={'small'} appearance={selected.includes(1) ? 'filled' : 'outline'}>0600-0700</Button>\n              <Button style={{flex: 1, marginHorizontal: 10}} size={'small'} appearance={'outline'}>0800-0900</Button>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>0900-1000</Button>\n            </View>\n\n            <View style={{flexDirection: 'row', marginHorizontal: 15, marginTop: 15}}>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>1000-1100</Button>\n              <Button style={{flex: 1, marginHorizontal: 10}} size={'small'} appearance={'outline'}>1100-1200</Button>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>1200-1300</Button>\n            </View>\n\n            <View style={{flexDirection: 'row', marginHorizontal: 15, marginTop: 15}}>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>1300-1400</Button>\n              <Button style={{flex: 1, marginHorizontal: 10}} size={'small'} appearance={'outline'}>1400-1500</Button>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>1500-1600</Button>\n            </View>\n\n            <View style={{flexDirection: 'row', marginHorizontal: 15, marginVertical: 15}}>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>1600-1700</Button>\n              <Button style={{flex: 1, marginHorizontal: 10}} size={'small'} appearance={'outline'}>1700-1800</Button>\n              <Button style={{flex: 1}} size={'small'} appearance={'outline'}>1800-1900</Button>\n            </View>\n          </ScrollView>\n          }\n        </Layout>\n      </SafeAreaView>\n    </Layout>\n  );\n}\n\nexport default Account"
        }
    ]
}